(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-282bd046"],{"34f7":function(t,e,i){"use strict";var a=i("6ce8"),l=i.n(a);l.a},"6ce8":function(t,e,i){},"715a":function(t,e,i){"use strict";var a=i("a965"),l=i.n(a);l.a},7217:function(t,e,i){"use strict";var a=i("af6c"),l=i.n(a);l.a},9981:function(t,e,i){"use strict";var a=i("d718"),l=i.n(a);l.a},a15b:function(t,e,i){"use strict";var a=i("23e7"),l=i("44ad"),o=i("fc6a"),s=i("a640"),n=[].join,r=l!=Object,c=s("join",",");a({target:"Array",proto:!0,forced:r||!c},{join:function(t){return n.call(o(this),void 0===t?",":t)}})},a965:function(t,e,i){},af6c:function(t,e,i){},d718:function(t,e,i){},d748:function(t,e,i){"use strict";e["a"]={inject:["ApiTeach"]}},fb49:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product-management"},[i("el-form",{attrs:{inline:"",size:"small"}},[i("div",{staticClass:"product-management-form"},[i("el-form-item",{attrs:{label:"产品标题："}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入产品标题"},model:{value:t.search.title,callback:function(e){t.$set(t.search,"title",e)},expression:"search.title"}})],1),i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.handleSearch}},[t._v("查询")]),i("el-button",{attrs:{plain:"",size:"small"},on:{click:t.clearSearch}},[t._v("清除")])],1)]),i("el-divider"),i("el-button",{attrs:{type:"success",size:"small"},on:{click:t.addClass}},[t._v("新增")]),i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"全部",name:"all"}}),i("el-tab-pane",{attrs:{label:"启用",name:"enable"}}),i("el-tab-pane",{attrs:{label:"禁用",name:"disable"}})],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.classList,size:"small",border:""}},[i("el-table-column",{attrs:{prop:"code",label:"产品编号",width:""}}),i("el-table-column",{attrs:{prop:"title",label:"产品标题",width:""}}),i("el-table-column",{attrs:{prop:"layout_text",label:"布局类型",width:""}}),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticClass:"coverImg",attrs:{src:t.row.cover,alt:""}})]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[i("el-link",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(i){return t.editProduct(e.row)}}},[t._v("编辑")]),i("el-link",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(i){return t.relationCourse(e.row.id)}}},[t._v("关联课程")]),[i("el-popconfirm",{attrs:{title:"确定要删除课程吗？"},on:{onConfirm:function(i){return t.delProduct(e.row.id)}}},[i("el-link",{attrs:{slot:"reference",plain:"",type:"primary",size:"mini"},slot:"reference"},[t._v("删除")])],1)]],2)]}}])})],1),i("page",{attrs:{nowPage:t.page.now,total:t.page.total,limit:t.page.limit},on:{pageChange:t.onPageChange,sizeChange:t.onSizeChange}}),i("dialog-com",{attrs:{dialogObj:t.dialogObj},on:{reflash:t.init}}),i("relation-dialog",{attrs:{dialogObj:t.relationObj},on:{reflash:t.init}})],1)},l=[],o=(i("ac1f"),i("841c"),i("96cf"),i("1da1")),s=i("d748"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product-dialog"},[i("el-dialog",{attrs:{width:"800px",title:t.dialogObj.name,visible:t.dialogObj.show,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.dialogObj,"show",e)}}},[i("el-form",{ref:"form",attrs:{model:t.form,size:"small","label-width":"100px"}},[i("el-form-item",{attrs:{label:"产品标题"}},[i("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"产品副标题"}},[i("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.form.sub_title,callback:function(e){t.$set(t.form,"sub_title",e)},expression:"form.sub_title"}})],1),i("el-form-item",{attrs:{label:"布局类型"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.form.layout,callback:function(e){t.$set(t.form,"layout",e)},expression:"form.layout"}},t._l(t.dictoryObj.CourseTypeEnum,(function(t,e){return i("el-option",{key:e,attrs:{label:t.value,value:t.key}})})),1)],1),i("el-form-item",{attrs:{label:"产品封面"}},[i("el-upload",{staticClass:"upload-item",attrs:{action:"/api/public/upload",accept:"image/*","show-file-list":!1,"http-request":t.uploadFile,"list-type":"picture-card",multiple:""}},[t.form.cover?i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{fit:"contain",src:t.form.cover}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),i("el-form-item",{attrs:{label:"产品说明"}},[t.dialogObj.show?i("editor-detail",{attrs:{lookData:t.form.desc}}):t._e()],1),i("el-form-item",{attrs:{label:"状态"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogObj.show=!1}}},[t._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.sub}},[t._v("保 存")])],1)],1)],1)},r=[],c=i("5530"),u=i("91b6"),d=i("2d80"),p=i("a833"),h=i("bcaf"),m={mixins:[s["a"],p["a"],h["a"]],name:"ProductDialog",components:{editorDetail:d["a"]},props:["dialogObj"],data:function(){return{form:{title:"",sub_title:"",cover:"",status:1,desc:{detail:""}}}},methods:{sub:function(){var t,e=this,i=this.form,a={title:i.title,sub_title:i.sub_title,status:i.status,cover:i.cover,layout:i.layout,content:i.desc.detail};return i.title?i.cover?i.layout?(2==this.dialogObj.type?(a.id=this.dialogObj.id,t=this.ApiTeach.putProductAPi):t=this.ApiTeach.postProductApi,void t(a).then((function(t){e.$message({type:"success",message:"保存成功"}),e.$emit("reflash"),e.dialogObj.show=!1}))):(this.$message({type:"error",message:"请选择布局类型!"}),!1):(this.$message({type:"error",message:"请上传课程封面!"}),!1):(this.$message({type:"error",message:"请输入标题!"}),!1)},uploadFile:function(t){var e=this;Object(u["a"])(t.file).then((function(t){e.form.cover=t.url}))}},watch:{"dialogObj.show":function(t){var e=this;t&&this.$nextTick((function(){if(e.form.title="",e.form.sub_title="",e.form.cover="",e.form.layout="",e.form.status=1,e.form.desc={detail:""},2==e.dialogObj.type){e.form={title:e.dialogObj.title,sub_title:e.dialogObj.sub_title,cover:e.dialogObj.cover,status:e.dialogObj.status,layout:e.dialogObj.layout};var t=Object(c["a"])({},e.dialogObj).content;e.form.desc={detail:t}}}))}}},f=m,g=(i("34f7"),i("2877")),b=Object(g["a"])(f,n,r,!1,null,"c4b165d0",null),v=b.exports,w=i("ff3c"),y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"relation-dialog"},[i("el-dialog",{attrs:{width:"800px",title:"唱唱VIP口语配音课",visible:t.dialogObj.show,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.dialogObj,"show",e)}}},[i("div",{staticClass:"handle-box"},[i("el-link",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:t.relationCourse}},[t._v("关联课程")]),[i("el-popconfirm",{attrs:{title:"确定要移除所有吗？"},on:{onConfirm:t.deleteAllClass}},[i("el-link",{attrs:{slot:"reference",plain:"",type:"primary",size:"mini"},on:{click:function(t){}},slot:"reference"},[t._v("全部清除")])],1)]],2),i("div",{staticClass:"class-list-box"},t._l(t.list,(function(e,a){return i("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:e,list:t.list,group:"list"},expression:"{ item: item, list: list, group: 'list' }"}],key:a,staticClass:"class-box"},[i("div",{staticClass:"title"},[t._v(" "+t._s(e.course.sub_title)+" ")]),i("div",{staticClass:"img-box"},[i("img",{attrs:{src:e.course.cover,alt:""}}),[i("el-popconfirm",{attrs:{title:"确定要移除吗？"},on:{onConfirm:function(i){return t.deleteClass(e.id)}}},[i("i",{staticClass:"iconfont el-icon-delete",attrs:{slot:"reference"},slot:"reference"})])]],2)])})),0),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.productSortBtn?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.productSort}},[t._v("保存当前排序")]):t._e()],1)]),i("relation-course-dialog",{attrs:{dialogObj:t.relationCourseObj},on:{reflash:t.init}})],1)},j=[],C=(i("4160"),i("a15b"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"relation-dialog"},[i("el-dialog",{attrs:{width:"800px",title:"课程列表",visible:t.dialogObj.show,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.dialogObj,"show",e)}}},[i("el-form",{attrs:{inline:"",size:"small"}},[i("div",{staticClass:"course-management-form"},[i("el-form-item",{attrs:{label:"课程类型："}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入课程编号"},model:{value:t.search.code,callback:function(e){t.$set(t.search,"code",e)},expression:"search.code"}})],1),i("el-form-item",{attrs:{label:"课程标题："}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入课程标题"},model:{value:t.search.title,callback:function(e){t.$set(t.search,"title",e)},expression:"search.title"}})],1),i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.handleSearch}},[t._v("查询")]),i("el-button",{attrs:{plain:"",size:"small"},on:{click:t.clearSearch}},[t._v("清除")])],1)]),i("el-divider"),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,size:"mini",border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),i("el-table-column",{attrs:{prop:"code",label:"课程编号"}}),i("el-table-column",{attrs:{prop:"title",label:"课程标题"}}),i("el-table-column",{attrs:{prop:"",label:"课程类型"}}),i("el-table-column",{attrs:{prop:"theme_num",label:"主题"}}),i("el-table-column",{attrs:{prop:"textbook_num",label:"课程"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogObj.show=!1}}},[t._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.sub}},[t._v("保 存")])],1)],1)],1)}),O=[],_={mixins:[s["a"]],name:"RelationCourceDialog",props:["dialogObj"],data:function(){return{loading:!1,search:{title:"",code:""},list:[],selected:[]}},mounted:function(){},methods:{sub:function(){var t=this,e={product_id:this.dialogObj.id};if(0==this.selected.length)return this.$message({type:"error",message:"请至少勾选一个!"}),!1;var i=[];this.selected.forEach((function(t){i.push(t.id)})),e.course_id=i.join(","),this.ApiTeach.postProductDetailApi(e).then((function(e){t.$message({type:"success",message:"保存成功"}),t.$emit("reflash"),t.dialogObj.show=!1}))},init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={scene:"all",exclude:"yes",id:t.dialogObj.id,title:t.search.title,code:t.search.code},e.next=3,t.ApiTeach.getCourseListApi(i);case 3:a=e.sent,t.list=a.items;case 5:case"end":return e.stop()}}),e)})))()},handleSearch:function(){this.init()},clearSearch:function(){this.search.title="",this.search.code="",this.init()},handleSelectionChange:function(t){this.selected=t}},watch:{"dialogObj.show":function(t){t&&this.clearSearch()}}},k=_,x=Object(g["a"])(k,C,O,!1,null,"a224f5a0",null),S=x.exports,z={mixins:[s["a"]],name:"RelationDialog",props:["dialogObj"],components:{RelationCourseDialog:S},data:function(){return{relationCourseObj:{show:!1},list:[],productSortArr:[],productSortBtn:!1}},mounted:function(){var t=this;this.$dragging.$on("dragged",(function(e){var i=e.value;t.productSortArr=i.list,t.productSortBtn=!0})),this.$dragging.$on("dragend",(function(){}))},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={product_id:t.id,scene:"all"},e.next=3,t.ApiTeach.getProductDetailRelationApi(i);case 3:a=e.sent,t.list=a.items;case 5:case"end":return e.stop()}}),e)})))()},sub:function(){},relationCourse:function(){this.relationCourseObj={show:!0,id:this.id}},productSort:function(){var t=this,e={ids:""},i=[];this.productSortArr.forEach((function(t){i.push(t.id)})),e.ids=i.join(","),this.ApiTeach.patchProductDetailSortApi(this.id,e).then((function(e){t.$message({type:"success",message:"保存成功"})}))},deleteClass:function(t){var e=this;this.ApiTeach.delProductDetailApi(t).then((function(t){1==e.list.length?e.list=[]:e.init()}))},deleteAllClass:function(){var t=this;0!=this.list.length&&this.ApiTeach.delAllProductRelationCourseApi(this.id).then((function(e){t.init()}))}},watch:{"dialogObj.show":function(t){var e=this;t&&(this.productSortBtn=!1,this.$nextTick((function(){e.id=e.dialogObj.id,e.init()})))}}},$=z,A=(i("7217"),Object(g["a"])($,y,j,!1,null,"a55dc6f8",null)),P=A.exports,T={mixins:[s["a"]],components:{dialogCom:v,page:w["a"],relationDialog:P},name:"ProductManagement",data:function(){return{loading:!1,params:{},activeName:"all",search:{title:""},classList:[],page:{now:1,total:0,limit:10},dialogObj:{type:0,show:!1,name:""},relationObj:{id:"",show:!1}}},mounted:function(){this.init()},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={pageIndex:t.page.now,pageSize:t.page.limit,title:t.search.title},"enable"==t.activeName?i.status=1:"disable"==t.activeName&&(i.status=0),e.next=4,t.ApiTeach.getProductListApi(i);case 4:a=e.sent,t.classList=a.items,t.page.total=a.total;case 7:case"end":return e.stop()}}),e)})))()},handleSearch:function(){this.page.now=1,this.init()},clearSearch:function(){this.search.title=""},onPageChange:function(t){this.page.now=t,this.init()},onSizeChange:function(t){this.page.now=1,this.page.limit=t,this.init()},delProduct:function(t){var e=this;this.ApiTeach.delProductApi(t).then((function(t){e.init()}))},addClass:function(){this.dialogObj={type:0,show:!0,name:"新增产品"}},editProduct:function(t){this.dialogObj={type:2,show:!0,name:"修改产品",title:t.title,sub_title:t.sub_title,status:t.status,cover:t.cover,id:t.id,content:t.content,layout:t.layout}},relationCourse:function(t){this.relationObj={show:!0,id:t}},handleClick:function(t){this.init()}}},D=T,R=(i("715a"),Object(g["a"])(D,a,l,!1,null,"919124b6",null));e["default"]=R.exports},ff3c:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-div"},[i("el-pagination",{attrs:{small:t.small,"page-size":t.limit,"page-sizes":t.pageSize,"current-page":t.nowPage,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},l=[],o={name:"page",data:function(){return{nowPage:1,pageSize:[5,10,20,30,40,50,60,80,100]}},props:{currentPage:{required:!1},edition:{required:!1},total:{required:!0},limit:{default:10},small:{required:!1,type:Boolean,default:!1}},created:function(){"1000"==this.edition&&(this.pageSize=[5,10,20,30,40,50,60,80,100,500,1e3])},watch:{currentPage:function(t){"number"===typeof t&&(console.log("prop currentPage!!!"),this.nowPage=t)}},methods:{handleCurrentChange:function(t){console.log("methods pageChange!!!"),this.$emit("pageChange",t)},handleSizeChange:function(t){this.nowPage=1,this.$emit("sizeChange",t)}}},s=o,n=(i("9981"),i("2877")),r=Object(n["a"])(s,a,l,!1,null,"13e53760",null);e["a"]=r.exports}}]);