(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7da439c4"],{"0955":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"textLeft",class:e.$style.searchWrap1},[r("el-row",{staticClass:"m20 el-form100",attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入采购单号"},model:{value:e.purchaseId,callback:function(t){e.purchaseId=t},expression:"purchaseId"}})],1),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择组织","value-key":"orgId",clearable:""},model:{value:e.orgId,callback:function(t){e.orgId=t},expression:"orgId"}},e._l(e.orgs,(function(t){return r("el-option",{key:t.orgId,attrs:{label:t.orgName,value:t.orgId}},[e._l(t.index,(function(t){return r("span",{staticClass:"opcaity"},[e._v("13")])})),r("span",[e._v(e._s(t.orgName))])],2)})),1)],1),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{clearable:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择经销人员","remote-method":e.remoteMethod,"value-key":"id"},model:{value:e.uid,callback:function(t){e.uid=t},expression:"uid"}},e._l(e.userList,(function(e){return r("el-option",{key:e.uid,attrs:{label:e.nickname,value:e.uid}})})),1)],1),r("el-col",{attrs:{span:6}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.valueDate,callback:function(t){e.valueDate=t},expression:"valueDate"}})],1),r("el-col",{attrs:{span:6}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"PurchaseView",expression:"'PurchaseView'"}],attrs:{type:"primary"},on:{click:e.searchM}},[e._v("查询 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"PurchaseRequest",expression:"'PurchaseRequest'"}],attrs:{type:"success"},on:{click:e.sponsorSale}},[e._v("发起采购 ")])],1)],1),r("el-row",{staticClass:"m20 el-form100",attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择商品","value-key":"id",clearable:""},model:{value:e.productId,callback:function(t){e.productId=t},expression:"productId"}},e._l(e.products,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择采购状态","value-key":"value",clearable:""},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择入库类型","value-key":"value",clearable:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),r("div",[r("my-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"textLeft",attrs:{data:e.data}},[r("el-table-column",{staticStyle:{},attrs:{label:"经销人员",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("ul",{staticClass:"textLeft"},[r("li",[r("span",[e._v("所属组织：")]),r("span",[e._v(e._s(t.row.orgName))])]),r("li",[r("span",[e._v("经销人员：")]),r("span",[e._v(e._s(t.row.nickname))])]),r("li",[r("span",[e._v("身份：")]),r("span",[e._v(e._s(t.row.identityName))])])])]}}])}),e._l(e.columnslist,(function(t){return r("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[r("span",{class:e.judgeClassName(t,n)},[e._v(e._s(n[t.prop]))])]}}],null,!0)})})),r("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status==e.objstatus.unpaid?r("el-popover",{directives:[{name:"permission",rawName:"v-permission",value:"PurchaseStatus",expression:"'PurchaseStatus'"}],attrs:{trigger:"click"}},[r("div",[r("el-link",{on:{click:function(r){return e.stateChange(t,2)}}},[e._v("付款中")]),r("el-link",{on:{click:function(r){return e.stateChange(t,3)}}},[e._v("采购成功")]),r("el-link",{on:{click:function(r){return e.stateChange(t,4)}}},[e._v("采购失败")])],1),r("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v(" 模拟状态变更 ")])],1):e._e(),t.row.status==e.objstatus.unpaid&&e.userInfo.uid===t.row.uid?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.sale(t)}}},[e._v(" 去支付 ")]):e._e(),t.row.status==e.objstatus.unpaid?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"PurchaseDelete",expression:"'PurchaseDelete'"}],attrs:{type:"text",size:"small"},on:{click:function(r){return e.del(t,0)}}},[e._v(" 删除 ")]):e._e(),t.row.status==e.objstatus.purFail?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.sale(t)}}},[e._v(" 去支付 ")]):e._e()]}}])})],2),r("el-pagination",{staticClass:"m20",attrs:{background:"",layout:"prev, pager, next,total",total:e.total,"page-size":e.pageSize,"current-page":e.curPage},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.curPage=t},"update:current-page":function(t){e.curPage=t}}})],1),e.dialogFormVisible?r("el-dialog",{attrs:{title:"采购申请",visible:e.dialogFormVisible,"close-on-click-modal":e.clickmodal,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{directives:[{name:"show",rawName:"v-show",value:0===e.isSubmitNoOrder,expression:"isSubmitNoOrder === 0"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"150px","label-position":"right"}},[r("el-row",{staticClass:"textLeft",attrs:{type:"flex",align:"middle"}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"所属组织："}},[r("span",[e._v(e._s(e.model.orgName))])])],1),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"经销人员："}},[r("span",[e._v(e._s(e.model.nickname))])])],1),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"身份："}},[r("span",[e._v(e._s(e.model.identityName))])])],1)],1),r("el-row",{staticClass:"textLeft",attrs:{type:"flex",align:"middle"}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采购单号："}},[r("span",[e._v(e._s(e.model.purchaseId))])])],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"供货商："}},[r("span",[e._v(e._s(e.model.fromName))])])],1)],1),r("el-row",{staticClass:"textLeft",attrs:{type:"flex",align:"middle"}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采购商品：",required:""}},[r("el-select",{attrs:{placeholder:"请选择商品"},on:{change:e.selectProducts},model:{value:e.model.productId,callback:function(t){e.$set(e.model,"productId",t)},expression:"model.productId"}},e._l(e.prices,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采购单价："}},[e._v(e._s(e.model.price))])],1)],1),r("el-row",{staticClass:"textLeft"},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"入库类型：",rules:[{required:!0,message:"请选择入库类型",trigger:["blur","change"]}]}},[r("el-radio-group",{on:{change:e.selectProducts},model:{value:e.stateId,callback:function(t){e.stateId=t},expression:"stateId"}},e._l(e.typeList,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value,value:t.value}},[e._v(e._s(t.name)+" ")])})),1)],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"现有库存："}},[r("el-link",{attrs:{type:"danger"}},[e._v(e._s(e.selfCount))])],1)],1)],1),r("el-row",{staticClass:"textLeft",attrs:{type:"flex",align:"middle"}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采购数量：",required:""}},[r("el-input",{attrs:{controls:!1,placeholder:"请选择数量",precision:0,min:1,max:e.fromAmount,disabled:0==e.fromAmount},on:{change:e.validNumber},model:{value:e.count,callback:function(t){e.count=t},expression:"count"}}),e.error?r("div",{staticClass:"red"},[e._v("采购数量不能超过最大采购数")]):e._e()],1)],1),r("el-col",{staticClass:"textLeft",attrs:{span:10}},[r("el-form-item",{attrs:{label:"最大采购数："}},[r("span",[e._v(e._s(e.fromAmount))])])],1)],1),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"备注："}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1)],1),r("el-row",{staticClass:"textLeft",attrs:{type:"flex",align:"middle"}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"采购金额："}},[r("el-link",{attrs:{type:"danger"}},[r("span",[e._v(e._s(e._f("formatNum")(e.totalMoney)))])])],1)],1)],1),r("el-form-item",{staticClass:"textLeft",attrs:{label:""}},[r("el-button",{attrs:{type:"success",disabled:0==e.fromAmount},on:{click:function(t){return e.submitOrder("ruleForm")}}},[e._v("提交订单 ")])],1)],1),r("section",{directives:[{name:"show",rawName:"v-show",value:0!==e.isSubmitNoOrder,expression:"isSubmitNoOrder !== 0"}]},[r("el-row",[r("el-col",{attrs:{span:12}},[e._v("采购单号："+e._s(e.purchaseNOByPro))]),r("el-col",{attrs:{span:12}},[e._v("采购金额："),r("span",{staticClass:"red"},[e._v(e._s(e._f("formatNum")(e.totalMoney1)))])])],1),r("el-image",{attrs:{src:e.qrUrl}},[r("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),r("span",{staticClass:"dot"},[e._v("...")])]),r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e._v(" 加载中"),r("span",{staticClass:"dot"},[e._v("...")])])])],1)],1):e._e()],1)},n=[],s=(r("fe59"),r("053b"),r("513c"),r("1b2e"),r("20a5"),r("e35a"),r("5e9f"),r("08ba"),r("b449"),r("ae9a")),o=r("0eaa"),i=r("bcaf"),u=r("a833"),c=r("43e5"),l=r("ae8c"),d={unpaid:1,duringPayment:2,purSuccess:3,purFail:4,purCancel:5},p={SUCCESS:"支付成功",REFUND:"转入退款",CLOSED:"已关闭",REVOKED:"已撤销",USERPAYING:"支付中",PAYERROR:"支付失败"},m={name:"PurchaseOrder",mixins:[i["a"],u["a"],c["a"]],data:function(){return{m1:"",objstatus:d,data:[],count:"",listCrumb:[{name:"系统管理"},{name:"会员卡库存",path:"PurchaseOrder"}],columnslist:[{prop:"productName",label:"商品名称"},{prop:"typeV",label:"入库类型"},{prop:"purchaseId",label:"采购单号"},{prop:"fromName",label:"供货商"},{prop:"priceV",label:"采购价"},{prop:"amount",label:"采购数量"},{prop:"moneyV",label:"采购金额"},{prop:"createTime",label:"采购时间"},{prop:"statusV",label:"采购状态"},{prop:"remark",label:"备注",width:150}],fromAmount:0,prices:[],model:{},state:0,stateId:"",selfCount:0,rules1:[{required:!0,message:"请选择入库类型",trigger:["blur","change"]}],products:[],productId:"",identitys:[],identityId:"",orgId:"",orgs:[],status:"",statusList:[],typeList:[],type:"",purchaseId:"",users:[],valueDate:[],beginDate:"",endDate:"",pageSize:5,remark:"",isSubmitNoOrder:0,qrUrl:"",purchaseNOByPro:"",totalMoney1:0,error:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(l["c"])("user",{userInfo:"userInfo"})),{},{totalMoney:function(){var e=(this.count*this.model.price).toFixed(2);return Number.isNaN(Number(e))?0:e}}),watch:{count:function(e){var t=this;null==e||""==e||e<1?this.count=1:"string"===typeof this.count&&(this.count=this.count.replace(/\D/g,""),this.count>this.fromAmount&&(this.count=Math.min(this.count,this.fromAmount),this.error=!0,setTimeout((function(){t.error=!1}),2e3)))}},methods:{judgeClassName:function(e,t){var r="statusV"===e.prop?"red":"";return 4==t.status||5==t.status?r:""},handleClose:function(e){var t=this;clearInterval(this.timer),setTimeout((function(){t.getTableList()}),100),e()},stateChange:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.row,a.next=3,r.ApiProduction.productPruStatus(n.purchaseId,t);case 3:a.sent,r.getTableList();case 5:case"end":return a.stop()}}),a)})))()},searchM:function(){this.valueDate&&this.valueDate.length?(this.beginDate=this.dayjs(this.valueDate[0]).format("YYYY-MM-DD"),this.endDate=this.dayjs(this.valueDate[1]).format("YYYY-MM-DD")):(this.beginDate="",this.endDate=""),this.getTableList()},checkPayState:function(){var e=this;this.timer=setInterval(Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiProduction.orderQueryStatus(e.buyPro.purchaseNO);case 2:r=t.sent,a="SUCCESS"===r?"success":"error",p[r]&&(e.$message({showClose:!0,message:p[r],type:a}),clearInterval(e.timer),e.close(),e.getTableList());case 5:case"end":return t.stop()}}),t)}))),1e3)},del:function(e,t){var r=this,a=e.row,n="";0===t?n="确定要删除该订单吗":1===t&&(n="确定要作废该订单吗"),this.confirmDelMessage(n,Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.ApiProduction.delProductPurchase(a.purchaseId));case 1:case"end":return e.stop()}}),e)}))),Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.getTableList();case 1:case"end":return e.stop()}}),e)}))))},cancellation:function(){},pay:function(){},validNumber:function(){},selectProducts:function(){var e=this;this.prices.forEach((function(t){t.id===e.model.productId&&(0===e.stateId?(e.selfCount=t.firstAmount,e.fromAmount=t.fromFirstAmount,e.model.price=t.firstPrice,e.model.fromAmount=e.firstAmount):1===e.stateId&&(e.selfCount=t.secondAmount,e.fromAmount=t.fromSecondAmount,e.model.price=t.secondPrice,e.model.fromAmount=e.secondAmount))}))},getBathSetting:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiProduction.getBathSetting();case 2:r=t.sent,e.maxVipBatch=Number(r.maxVipBatch);case 4:case"end":return t.stop()}}),t)})))()},sale:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.row,t.isSubmitNoOrder=1,t.state=0,t.open(),t.totalMoney1=a.money,t.buyPro={purchaseNO:a.purchaseNO},t.purchaseNOByPro=a.purchaseNO,r.next=9,t.ApiProduction.getProductPay(a.purchaseId);case 9:t.qrUrl=r.sent,t.checkPayState(),t.closeLoading();case 12:case"end":return r.stop()}}),r)})))()},sponsorSale:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isSubmitNoOrder=0,e.stateId="",e.count=1,e.state=1,e.fromAmount=0,e.remark="",e.selfCount="",e.$nextTick((function(){e.open(),e.addNewSale("")}));case 8:case"end":return t.stop()}}),t)})))()},addNewSale:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiProduction.productRequest();case 2:r=t.sent,r.price="",e.prices=r.prices,e.model=r;case 6:case"end":return t.stop()}}),t)})))()},submitOrder:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.model.productId){e.next=3;break}return t.$message({message:"请选择采购产品",type:"error"}),e.abrupt("return");case 3:if(""!==t.stateId){e.next=6;break}return t.$message({message:"请选择入库类型",type:"error"}),e.abrupt("return");case 6:t.model.money=t.totalMoney,t.model.amount=t.count,t.model.type=t.stateId,t.model.fromAmount=t.fromAmount,t.model.remark=t.remark,t.prices.forEach((function(e){e.id===t.model.productId&&(t.model.productName=e.name,t.model.priceId=e.priceId)})),t.buyProduction(),t.isSubmitNoOrder=1;case 14:case"end":return e.stop()}}),e)})))()},buyProduction:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r="",0!==e.state){t.next=7;break}return t.next=4,e.ApiProduction.putProductPurchase(e.model);case 4:r=t.sent,t.next=10;break;case 7:return t.next=9,e.ApiProduction.postProductPurchase(e.model);case 9:r=t.sent;case 10:return e.buyPro=r,t.next=13,e.ApiProduction.getProductPay(r.purchaseId);case 13:e.qrUrl=t.sent,e.purchaseNOByPro=r.purchaseNO,e.totalMoney1=e.totalMoney,e.checkPayState();case 17:case"end":return t.stop()}}),t)})))()},currentChange:function(){this.getTableList()},getProduct:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiProduction.getProduct();case 2:e.products=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getUserIdentitys:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiUser.getUserIdentitys();case 2:e.identitys=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiUser.getUser();case 2:e.users=t.sent;case 3:case"end":return t.stop()}}),t)})))()},selectTypes:function(){},getTableList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.openLoading(),t.next=3,e.ApiProduction.productPurchaseType();case 3:return r=t.sent,t.next=6,e.ApiProduction.productPurchaseStatus();case 6:return a=t.sent,e.typeList=r,t.next=10,e.ApiProduction.productPurchase({curPage:e.curPage,pageSize:e.pageSize,orgId:e.orgId,status:e.status,productId:e.productId,purchaseId:e.purchaseId,type:e.type,beginDate:e.beginDate,endDate:e.endDate,uid:e.uid});case 10:n=t.sent,e.total=n.rowCount,n.list.forEach((function(t){r.forEach((function(e){t.type===e.value&&(t.typeV=e.name)})),a.forEach((function(e){t.status===e.value&&(t.statusV=e.name)})),t.priceV=e.formatNum(t.price),t.moneyV=e.formatNum(t.money)})),e.data=n.list,e.statusList=a,e.typeList=r,e.closeLoading();case 17:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getBathSetting(),this.getTableList(),this.getProduct(),this.getUserIdentitys(),this.getOrgs(),this.getUser(),this.remoteMethod("")}},f=m,h=r("c102"),g=r("4023");function v(e){this["$style"]=h["default"].locals||h["default"]}var b=Object(g["a"])(f,a,n,!1,v,null,null);t["default"]=b.exports},"1b2e":function(e,t,r){var a=r("1c8b");a({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},"350f":function(e,t,r){e.exports={search:"PurchaseOrder_search_2t9zb",inputW:"PurchaseOrder_inputW_2_hPU",static:"PurchaseOrder_static_3M0e0",searchWrap:"PurchaseOrder_searchWrap_3LkJi",search1:"PurchaseOrder_search1_3F64O",min30:"PurchaseOrder_min30_2S6iM",m20:"PurchaseOrder_m20_1rbyg",searchWrap1:"PurchaseOrder_searchWrap1_355ho",myInput:"PurchaseOrder_myInput_emApz",labelSpan:"PurchaseOrder_labelSpan_31B4W"}},4194:function(e,t,r){"use strict";var a=r("1c8b"),n=r("5dfd").find,s=r("258f"),o=r("ff9c"),i="find",u=!0,c=o(i);i in[]&&Array(1)[i]((function(){u=!1})),a({target:"Array",proto:!0,forced:u||!c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},"43e5":function(e,t,r){"use strict";r("dbb3"),r("fe59"),r("08ba"),r("b449");var a=r("ae9a");t["a"]={data:function(){return{orgId:"",productId:"",uid:"",beginDate:"",endDate:"",orgs:[],products:[],userList:[],valueDate:[],inventoryList:[],type:"",allProCityList:[],provinceList:[],reportList:[]}},methods:{getOrgs:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiOther.getOrgs();case 2:r=t.sent,a=e.getTreeList(r,0,[],"orgId"),r=e.flattenOrgs(a),e.orgs=r;case 6:case"end":return t.stop()}}),t)})))()},getProduct:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiProduction.getProduct();case 2:e.products=t.sent;case 3:case"end":return t.stop()}}),t)})))()},flattenOrgs:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.forEach((function(e){e.index=a,r.push(e),e.children&&t.flattenOrgs(e.children,r,a+1)})),r},getUsers:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.ApiUser.getSelectUsers(e);case 2:t.userList=r.sent;case 3:case"end":return r.stop()}}),r)})))()},getInventorTypes:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiProduction.productPurchaseType();case 2:e.inventoryList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getAllProvince:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiOther.dictProvince();case 2:e.allProCityList=t.sent,e.provinceList=e.getTarget(e.allProCityList);case 4:case"end":return t.stop()}}),t)})))()},getTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((function(e){if(e.parentId===t)return e}))}}}},a833:function(e,t,r){"use strict";r("dbb3"),r("4194"),r("fe59"),r("513c"),r("20a5"),r("e35a"),r("5e9f"),r("08ba"),r("b449");var a=r("ae9a"),n=r("0eaa"),s=r("ae8c");t["a"]={inject:["ApiBasic","ApiResource","ApiBase","ApiProduction","ApiOther","ApiUser","ApiReport","cloneDeep","ApiMenu","dayjs","ApiOrder","ApiCourse"],computed:Object(n["a"])({},Object(s["c"])("course",{dictoryObj:"dictoryObj"})),data:function(){return{loading:!0,total:1,uid:"",userList:[],clickmodal:!1}},methods:{filterEnum:function(e,t){return this.dictoryObj[e].find((function(e){return e.key==t})).value},openLoading:function(){this.loading=!0},formatNum:function(e){return e=Number(e),(e.toFixed(2)+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")},closeLoading:function(){this.loading=!1},confirmDelMessage:function(e,t,r){this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t();case 4:e.t0=e.sent;case 5:a=e.t0,"number"!=typeof a&&r&&r();case 7:case"end":return e.stop()}}),e)}))))},tipMessage:function(e,t){this.$message({showClose:!0,message:e,type:t})},getTreeList:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;if(Array.isArray(e))return e.forEach((function(s){if(s.parentId===r)return a.push(s),s.children=[],t.getTreeList(e,s[n],s.children,n)})),a},flatten:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((function(e){e.index=r,a.push(e),e.children&&t.flatten(e.children,r+1,a)})),a},filterAllChild:function(){},remoteMethod:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.ApiUser.getSelectUsers(e);case 2:t.userList=r.sent;case 3:case"end":return r.stop()}}),r)})))()},getTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((function(e){if(e.parentId===t)return e}))}}}},c102:function(e,t,r){"use strict";var a=r("350f"),n=r.n(a);t["default"]=n.a}}]);