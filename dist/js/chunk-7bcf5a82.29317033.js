(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bcf5a82"],{"0879":function(e,t,r){},"0ee2":function(e,t,r){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"311b":function(e,t,r){},"6cec":function(e,t,r){"use strict";var n=r("311b"),a=r.n(n);a.a},"841c":function(e,t,r){"use strict";var n=r("d784"),a=r("825a"),i=r("1d80"),o=r("129f"),s=r("14c3");n("search",1,(function(e,t,r){return[function(t){var r=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var i=a(e),l=String(this),c=i.lastIndex;o(c,0)||(i.lastIndex=0);var u=s(i,l);return o(i.lastIndex,c)||(i.lastIndex=c),null===u?-1:u.index}]}))},"879d":function(e,t,r){"use strict";var n=r("0ee2"),a=r.n(n);a.a},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),i=r("a691"),o=r("50c4"),s=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),d=r("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,b=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var r,n,u,d,p,m,v=s(this),_=o(v.length),y=a(e,_),w=arguments.length;if(0===w?r=n=0:1===w?(r=0,n=_-y):(r=w-2,n=b(f(i(t),0),_-y)),_+r-n>h)throw TypeError(g);for(u=l(v,n),d=0;d<n;d++)p=y+d,p in v&&c(u,d,v[p]);if(u.length=n,r<n){for(d=y;d<_-n;d++)p=d+n,m=d+r,p in v?v[m]=v[p]:delete v[m];for(d=_;d>_-n+r;d--)delete v[d-1]}else if(r>n)for(d=_-n;d>y;d--)p=d+n-1,m=d+r-1,p in v?v[m]=v[p]:delete v[m];for(d=0;d<r;d++)v[d+y]=arguments[d+2];return v.length=_-n+r,u}})},a833:function(e,t,r){"use strict";r("4de4"),r("4160"),r("a9e3"),r("b680"),r("ac1f"),r("5319"),r("159b"),r("96cf");var n=r("1da1"),a=r("5530"),i=r("2f62");t["a"]={inject:["ApiBasic","ApiResource","ApiBase","ApiProduction","ApiOther","ApiUser","ApiReport","cloneDeep","ApiMenu","dayjs","ApiOrder","ApiCourse"],computed:Object(a["a"])({},Object(i["c"])("course",{dictoryObj:"dictoryObj"})),data:function(){return{loading:!0,total:1,uid:"",userList:[],clickmodal:!1}},methods:{openLoading:function(){this.loading=!0},formatNum:function(e){return e=Number(e),(e.toFixed(2)+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")},closeLoading:function(){this.loading=!1},confirmDelMessage:function(e,t,r){this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t();case 4:e.t0=e.sent;case 5:n=e.t0,"number"!=typeof n&&r&&r();case 7:case"end":return e.stop()}}),e)}))))},tipMessage:function(e,t){this.$message({showClose:!0,message:e,type:t})},getTreeList:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;if(Array.isArray(e))return e.forEach((function(i){if(i.parentId===r)return n.push(i),i.children=[],t.getTreeList(e,i[a],i.children,a)})),n},flatten:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((function(e){e.index=r,n.push(e),e.children&&t.flatten(e.children,r+1,n)})),n},filterAllChild:function(){},remoteMethod:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.ApiUser.getSelectUsers(e);case 2:t.userList=r.sent;case 3:case"end":return r.stop()}}),r)})))()},getTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((function(e){if(e.parentId===t)return e}))}}}},bec6:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"score-dialog",attrs:{top:"5vh",title:e.title,visible:e.dialogData.show,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogData,"show",t)}}},[r("div",[r("el-form",{attrs:{model:e.form,"label-width":"100px",size:"small"}},[r("el-form-item",{attrs:{label:"评分标准名"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"评分区间"}},[r("div",{staticClass:"score-item"},[r("score-star",{attrs:{star:"1"}}),r("cc-number-range",{attrs:{min:"0",max:"100",maxlength:"3"},model:{value:e.form.rule[0],callback:function(t){e.$set(e.form.rule,0,t)},expression:"form.rule[0]"}})],1),r("div",{staticClass:"score-item"},[r("score-star",{attrs:{star:"2"}}),r("cc-number-range",{attrs:{min:"0",max:"100",maxlength:"3"},model:{value:e.form.rule[1],callback:function(t){e.$set(e.form.rule,1,t)},expression:"form.rule[1]"}})],1),r("div",{staticClass:"score-item"},[r("score-star",{attrs:{star:"3"}}),r("cc-number-range",{attrs:{min:"0",max:"100",maxlength:"3"},model:{value:e.form.rule[2],callback:function(t){e.$set(e.form.rule,2,t)},expression:"form.rule[2]"}})],1)]),r("el-form-item",{attrs:{label:"评价语音"}},e._l(e.form.evaluate_voice,(function(t,n){return r("div",{staticClass:"score-item"},[r("score-star",{attrs:{star:n+1}}),r("div",{staticClass:"audio-item"},[r("el-upload",{staticClass:"upload-item",attrs:{"show-file-list":!1,action:"/api/public/upload","list-type":"text","http-request":function(t){return e.uploadFile(t,"evaluate_voice",n)}}},[r("el-button",[r("i",{staticClass:"iconfont icon-cloud-upload"}),e._v(" 上传音频")])],1),e.form.evaluate_voice[n]?r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.openMedia(e.form.evaluate_voice[n])}}},[r("i",{staticClass:"iconfont icon-play-circle"}),e._v(" 播放音频 ")]):e._e()],1)],1)})),0),r("el-form-item",{attrs:{label:"重试录音"}},[r("div",{staticClass:"audio-item"},[r("el-upload",{staticClass:"upload-item",attrs:{action:"/api/public/upload",accept:"audio/mp3","show-file-list":!1,"list-type":"text","http-request":function(t){return e.uploadFile(t,"retry_voice")}}},[r("el-button",[r("i",{staticClass:"iconfont icon-cloud-upload"}),e._v(" 上传音频")])],1),e.form.retry_voice?r("el-button",{attrs:{disabled:!e.form.retry_voice},on:{click:function(t){return e.openMedia(e.form.retry_voice)}}},[r("i",{staticClass:"iconfont icon-play-circle"}),e._v(" 播放音频 ")]):e._e()],1)])],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.dialogToggle}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1)])},a=[],i=(r("a434"),r("96cf"),r("1da1")),o=r("a833"),s=r("bcaf"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-rate",{staticClass:"score-star",style:"width: "+e.width,attrs:{value:Number(e.star),max:3,disabled:"","disabled-void-color":"#ffffff","text-color":"#ff9900"}})},c=[],u=(r("a9e3"),{name:"ScoreStar",props:{star:{type:[Number,String],default:3},width:{type:String,default:"auto"}}}),d=u,p=(r("6cec"),r("2877")),m=Object(p["a"])(d,l,c,!1,null,null,null),f=m.exports,b=r("91b6"),h=(r("2b61"),{title:"",rule:[[0,30],[31,80],[80,100]],evaluate_voice:[0,0,0],retry_voice:""}),g={name:"ScoreDialog",mixins:[o["a"],s["a"]],components:{ScoreStar:f},props:{dialogData:{type:Object,default:{show:!1,param:{id:0}}}},data:function(){return{title:"",form:JSON.parse(JSON.stringify(h))}},watch:{"dialogData.show":function(e){e&&this.init()}},methods:{init:function(){this.dialogData.param.id?(this.title="编辑",this.form=this.dialogData.param):(this.title="新增",this.form=JSON.parse(JSON.stringify(h)))},uploadFile:function(e,t,r){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(b["a"])(e.file);case 2:i=a.sent,"retry_voice"==t?n.form.retry_voice=i.url:"evaluate_voice"==t&&n.form.evaluate_voice.splice(r,1,i.url);case 4:case"end":return a.stop()}}),a)})))()},openMedia:function(e){window.open(e,"_blank")},dialogToggle:function(){this.dialogData.show=!this.dialogData.show},dialogSave:function(){var e=this,t={title:this.form.title,rule:JSON.stringify(this.form.rule),evaluate_voice:JSON.stringify(this.form.evaluate_voice),retry_voice:this.form.retry_voice};this.ApiBasic.postScore(t).then((function(t){e.$message.success("保存成功"),e.dialogToggle(),e.$parent.getData()}))}}},v=g,_=(r("ef99"),Object(p["a"])(v,n,a,!1,null,null,null));t["a"]=_.exports},dd96:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"exercises"},[r("el-row",[r("el-col",{attrs:{span:6}},[r("div",{staticClass:"titleFlex"},[r("div",{staticClass:"title"},[e._v("配音标题：")]),r("div",[r("el-input",{model:{value:e.searchObj.title,callback:function(t){e.$set(e.searchObj,"title",t)},expression:"searchObj.title"}})],1)])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"titleFlex"},[r("div",[e._v("标签：")]),r("div",[r("el-input",{attrs:{multiple:"",placeholder:"请选择标签"},model:{value:e.searchObj.title,callback:function(t){e.$set(e.searchObj,"title",t)},expression:"searchObj.title"}})],1)])]),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1),r("el-form",{staticClass:"section-search",attrs:{size:"small",inline:""}},[r("el-form-item",[r("el-button",{attrs:{type:"success",plain:""},on:{click:e.handleAdd}},[e._v("添加习题")])],1)],1),r("my-table",{attrs:{data:e.list}},[e._l(e.cols,(function(e){return r("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.name}})})),r("el-table-column",{attrs:{prop:"title",label:"配音素材"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("el-image",{attrs:{src:t.material_url}})]}}])}),r("el-table-column",{attrs:{label:"原生录音",prop:"ori_sound"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openMediaBy(n)}}},[e._v("播放录音 ")])]}}])}),r("el-table-column",{attrs:{prop:"dubbing_content",label:"配音内容"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("div",{domProps:{innerHTML:e._s(n.dubbing_content)}})]}}])}),r("el-table-column",{attrs:{prop:"dubbing_answer",label:"配音答案"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("div",{domProps:{innerHTML:e._s(n.dubbing_answer)}})]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{plain:"",size:"small",type:"warning"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("编辑 ")]),r("el-button",{attrs:{plain:"",size:"small",type:"danger"},on:{click:function(r){return e.handleDelete(t.row.id)}}},[e._v("删除 ")])]}}])})],2),r("el-pagination",{staticClass:"m20",attrs:{background:"",layout:"prev, pager, next,total",total:e.searchObj.total,"page-size":e.searchObj.pageSize,"current-page":e.searchObj.pageIndex},on:{"current-change":e.pageCurrentChange,"update:currentPage":function(t){return e.$set(e.searchObj,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.searchObj,"pageIndex",t)}}}),e.dialogFormVisible?r("el-dialog",{attrs:{title:"制作兑换码",visible:e.dialogFormVisible,"close-on-click-modal":e.clickmodal},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("my-form",{ref:"myForm",staticClass:"textLeft",attrs:{rules:e.rules,model:e.model,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"配音标题：",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),r("el-form-item",{attrs:{label:"素材类型："}},[r("el-select",{attrs:{placeholder:"请选择素材",clearable:""},model:{value:e.model.material_type,callback:function(t){e.$set(e.model,"material_type",t)},expression:"model.material_type"}},e._l(e.dictoryObj.QuestionMaterialTypeEnum,(function(e){return r("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),r("el-form-item",{attrs:{label:"配音素材"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/public/upload","show-file-list":!1,multiple:e.multiple,"on-success":e.handleAvatarSuccess,accept:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF","http-request":function(t){return e.uploadFile(t,"1")}}},[r("div",{staticClass:"imageWrap"},[e.model.material_url?r("img",{staticClass:"avatar",attrs:{src:e.model.material_url}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])],1),r("el-form-item",{attrs:{label:"原声录音：",prop:"ori_sound"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/public/upload",accept:".MP3,.APE,.AAC,.WAV,.mp3,.ape,.aac,.wav","show-file-list":!1,"http-request":function(t){return e.uploadFile(t,"2")}}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传音频")])],1),e.model.ori_sound?r("el-button",{attrs:{size:"small",type:"success"},on:{click:e.openMedia}},[e._v("播放音频 ")]):e._e()],1),r("el-form-item",{attrs:{label:"配音类型：",prop:"dubbing_type"}},[r("el-select",{attrs:{placeholder:"请选择配音类型",clearable:""},model:{value:e.model.dubbing_type,callback:function(t){e.$set(e.model,"dubbing_type",t)},expression:"model.dubbing_type"}},e._l(e.dictoryObj.DubbingTypeEnum,(function(e){return r("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),r("el-form-item",{attrs:{label:"配音内容：",prop:"dubbing_content"}}),r("el-form-item",{attrs:{label:"配音答案：",prop:"dubbing_answer"}}),r("el-form-item",{attrs:{label:"配音描述详情：",prop:"dubbing_content_tran"}}),r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.save("myForm")}}},[e._v("保存")])],1)],1):e._e()],1)},a=[],i=(r("4160"),r("ac1f"),r("841c"),r("159b"),r("96cf"),r("1da1")),o=r("a833"),s=r("bcaf"),l=r("bec6"),c=r("91b6"),u={name:"Exercises",mixins:[o["a"],s["a"]],components:{ScoreDialog:l["a"]},data:function(){return{searchObj:{title:"",total:0,pageIndex:1,pageSize:5},model:{title:"",material_type:"",material_url:"",ori_sound:"",dubbing_type:"",dubbing_content:"<p class='red'>1234</p>",dubbing_answer:"123"},cols:[{name:"编号",prop:"code"},{name:"配音标题",prop:"title"},{name:"素材类型",prop:"material_typeV"},{name:"配音类型",prop:"dubbing_typeV"}],cols1:[{name:"配音内容",prop:"ori_sound"},{name:"配音答案",prop:""}],list:[],state:0,rules:{title:[{required:!0,message:"请输入配音标题",trigger:["blur","change"]}],dubbing_type:[{required:!0,message:"请输入配音类型",trigger:["blur","change"]}],ori_sound:[{required:!0,message:"请上传原声配音",trigger:["blur","change"]}],dubbing_content:[{required:!0,message:"请填写配音内容",trigger:["blur","change"]}],dubbing_answer:[{required:!0,message:"请填写配音答案",trigger:["blur","change"]}],dubbing_content_tran:[{required:!0,message:"请填写配音描述详情",trigger:["blur","change"]}]},multiple:!1,isShowOpen:!1}},methods:{uploadFile:function(e,t,r){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["a"])(e.file);case 2:a=r.sent,1==t?n.model.material_url=a.url:2==t&&(n.model.ori_sound=a.url);case 4:case"end":return r.stop()}}),r)})))()},save:function(e){var t=this;this.$refs[e].$children[0].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}if(n="",0!=t.state){e.next=8;break}return e.next=5,t.addQuestion();case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,t.editQuestion();case 10:n=e.sent;case 11:"number"!==typeof n&&(t.close(),t.search()),e.next=16;break;case 14:return console.log("error submit!!"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},openMedia:function(){window.open(this.model.ori_sound,"_blank")},openMediaBy:function(e){var t=e.ori_sound;window.open(t,"_blank")},handleAvatarSuccess:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},addQuestion:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiCourse.postVoiceQuestions(e.model);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},editQuestion:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ApiCourse.putVoiceQuestions(e.model);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getQuestion:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dictoryObj.QuestionMaterialTypeEnum,n=e.dictoryObj.DubbingTypeEnum,t.next=4,e.ApiCourse.getVoiceQuestions(e.searchObj);case 4:a=t.sent,a.items.forEach((function(e){r.forEach((function(t){e.material_type==t.key&&(e.material_typeV=t.value)})),n.forEach((function(t){e.dubbing_type==t.key&&(e.dubbing_typeV=t.value)}))})),e.list=a.items,e.searchObj.total=a.total;case 8:case"end":return t.stop()}}),t)})))()},handleAdd:function(){this.state=0,this.resetData(),this.open()},resetData:function(){this.model={title:"",material_type:"",material_url:"",ori_sound:"",dubbing_type:"",dubbing_content:"<p class='red'>1234</p>",dubbing_answer:"123",dubbing_content_tran:"123"}},search:function(){this.searchObj.title="",this.searchObj.pageIndex=1,this.getQuestion()},pageCurrentChange:function(e){this.searchObj.index=e,this.getQuestion()},handleEdit:function(e){Object.assign(this.model,e),this.open(),this.state=1},delQuestion:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.ApiCourse.delVoiceQuestions(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},handleDelete:function(e){var t=this;this.$confirm("确定要删除该问题吗","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.delQuestion(e);case 2:n=r.sent,console.log(n);case 4:case"end":return r.stop()}}),r)}))))}},mounted:function(){this.getQuestion()}},d=u,p=(r("879d"),r("2877")),m=Object(p["a"])(d,n,a,!1,null,null,null);t["default"]=m.exports},ef99:function(e,t,r){"use strict";var n=r("0879"),a=r.n(n);a.a}}]);